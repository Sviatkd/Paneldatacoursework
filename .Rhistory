CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treeeda, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Spain")
dependent <- c("Germany","Italy","Austria","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country,data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols
summary(pooledols)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_line(mean(Energypric))
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_line(mean(Energyprice))
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()
library(tidyverse)
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
library(lmtest)
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
library(sandwich)
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Spain")
dependent <- c("Germany","Italy","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country,data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
plot(pooledols)
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Spain")
dependent <- c("Germany","Italy","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country,data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Slovenia")
dependent <- c("Germany","Italy","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country,data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
library(lmtest)
library(sandwich)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Slovenia")
dependent <- c("Germany","Italy","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country,data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
olscfe
coeftest(olsyearcfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
coeftest(olscfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
olscfe
summary(olscfe)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
summary(pooledols)
bptest(olscfe)
coeftest(olscfe,vcov. = vcovHC(olsyearcfe,type="HC1"))
coeftest(olscfe,vcov. = vcovHC(olscfe,type="HC1"))
plot(olscfe)
plot(pooledols)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
lm(log(Energyprice)~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
ggplot(treatment_control_df,aes(x=Year,y=log(Energyprice),colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
lpooled <- lm(log(Energyprice)~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
summary(lpooled)
lpooled <- lm(log(Energyprice)~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion)+Country,data=treatment_control_df)
summary(lpooled)
lpooled <- lm(Energyprice*100~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion)+Country,data=treatment_control_df)
summary(lpooled)
plot(lpooled)
AIC(lpooled)
library(stargazer)
stargazer(olscfe)
stargazer(olscfe)
stargazer(olscfe,type = text)
stargazer(olscfe,type = "text")
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
stargazer(poooledols,olscfe,olsyearcfe,type = "text")
stargazer(pooledols,olscfe,olsyearcfe,type = "text")
library(readxl)
library(tidyverse)
library(rpart)
library(rpart.plot)
library(lmtest)
library(sandwich)
library(stargazer)
CleanEnergy <- read_excel("C:/Users/alexa/Downloads/CleanEnergy.xlsx",
sheet = "Sheet3")
CleanEnergy$Energyprice <- as.numeric(CleanEnergy$Energyprice)
CleanEnergy$Country <- as.factor(CleanEnergy$Country)
treepooled <- rpart(Energyprice~Year+factor(Country),data=CleanEnergy)
summary(treepooled)
pdf("tree_plot.pdf", width = 20, height = 15)
rpart.plot(treepooled, type = 1, extra = 101, tweak = 1.5, cex = 0.7)
dev.off()
control <- c("Sweden","Denmark","France","Slovenia")
dependent <- c("Germany","Italy","Czechia","Netherlands","Greece")
panel_df <- CleanEnergy %>%
mutate(
control = ifelse(Country %in% control, 1, 0),
treatment= ifelse(Country %in% dependent,1,0),
corrosion = ifelse(Country=="France"&Year%in%c(6,7),1,0))
treatment_control_df <- panel_df %>%
filter(treatment + control == 1)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(treatment)))+geom_jitter()+geom_smooth(method = "loess",se=FALSE)
ggplot(treatment_control_df,aes(x=Year,y=Energyprice,colour = factor(interaction(treatment,Crisis,corrosion))))+geom_jitter()+geom_smooth(method="loess",se=FALSE)
pooledols <- lm(Energyprice~factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
olsyearfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment),data=treatment_control_df)
olscfe <- lm(Energyprice~Country+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+factor(corrosion),data=treatment_control_df)
olsyearcfe <- lm(Energyprice~factor(Year)+factor(Crisis)+factor(treatment)+factor(Crisis)*factor(treatment)+Country+factor(corrosion),data=treatment_control_df)
AIC(pooledols,olsyearfe,olscfe,olsyearcfe)
BIC(pooledols,olsyearfe,olscfe,olsyearcfe)
anova(olscfe)
bptest(olscfe)
coeftest(olscfe,vcov. = vcovHC(olscfe,type="HC1"))
stargazer(pooledols,olscfe,olsyearcfe,type = "text")
